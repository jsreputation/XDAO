                         Test Report generated by automated testing.

        This is an automated testing of the smart contract of the crypto token XDAO.
        A test script will be running with multiple predefined test cases.
        While this testing can not provide a rigorous proof of the system,
        it covers the majority of use cases, when supplemented with code logic.     
    √ The purpose was stated.
        The test cases were carefully selected to be independent yet typical.       
        When combined, the test cases are multiplied / convoluted with each other,  
        implicitly covering a majority range of use cases.
        Important events emitted by the token contract were checked.
    √ The scope was stated.
        There are three phases of testing: test-bed, initial contract, and upgrading contract.
        Test-bed phase will build atesting environment for the remaining two phases.
        Initial phase will test the initial contract with a set of test cases.
        Upgraded phase will test the upgrading contract with the same set of test cases.
        Note: The initial contract is later upgraded by the upgrading contract, which
        inherits the state of initial contracts at the same address of deployment.
    √ The strategy was stated.

  ======= Phase 1. The test-bed for the whole testing is constructed. =====

        A predefined set of test cases will be running on the initial contract.
    √ 

  1. Connect to Provider-Wallet-Network.

        theOwner's address = {0xf39F...}, balance = 10,000 FTM.
        Alice's address = {0x7099...}, balance = 10,000 FTM.
        Bob's address = {0x3C44...}, balance = 10,000 FTM.
        Charlie's address = {0x90F7...}, balance = 10,000 FTM.
    √ Test signers, defined in your hardhat.config.js, are ready. (981ms)

  2. Build a main Dex environment for the contract of the XDAO token.

        A clone Hertz deployed to: {0x5FbD...}
    √ A clone of Hertz token contract was deployed and is ready for use. (203ms)
        !!! Source code signature = 
         2de75715eaadc263f93ae31df0472548254992f701bb9830d9ed08b3e5f4fa21
        !!! Please make sure the pairFor(...) function of PancakeRouter.sol file has the same code.
    √ A clone of PancakeFactory contract was deployed and is ready for use. (125ms)
    √ A WETH token contract was deployed and is ready for use. (54ms)
        A clone PancakeRouter deployed to: {0xCf7E...}
    √ A clone of PancakeRouter was deployed with the PancakeFactory and WETH. (66ms)
    √ The PancakeFactory and PancakeRouter are checked for matching.

  3. Deploy the initial upgradeable contract of XDAO token.

        Upgradeable initial contract of XDAO token deployed to:  {0x0165...}
    √ The initial contract of XDAO token was deployed. (379ms)
        Token name: XDAO Utility Token
        Token symbol: XO
        Total supply: 1,000,000,000,000,000

        theOwner is the current owner: {0xf39F...}
        Current owner's balance: 1,000,000,000,000,000 XO.
    √ The basic existence of the contract was checked for. (47ms)

        BurnFee: 31.4% of transfer amount is correctly set to be burnt.
        RewardsFee: 31.4% of transfer amount is correctly set to be converted to Rewards Hertz.
        LiquidityFee: 2.3% of transfer amount is correctly set to be liquefied in pair with FTM.

        BurnStore Address: {0x8887...} is correctly set.
        RewardsStore Address: {0x0300...} is correctly set.
        LiquidityStore Address: {0x1093...} is correctly set.

        VoteBurnPulse: 0.07% of tokens used to vote are correctly set to be burnt.
        AllBurnPulse: 0.777% of all holdings is correctly set to be burnt.
        LiquidityPulse: 0.69% of LP is correctly set to be converted to Rewards Hertz.

        maxTransferAmount 1,000,000,000,000 XO is correctly set.
        burnQuantum 100,000 XO is correctly set.
        rewardsQuantum 200,000 XO is correctly set.
        liquidityQuantum 300,000 XO is correctly set.

        Dex Router address {0xCf7E...} is correctly set.
        Liquidity Pool (XDAO, FTM) is found at its due address: {0x0ACa...}.
        Liquidity Pool (XDAO, HTZ) is found at its due address: {0x5CCF...}.

        autoManagement is currently set to:  true
    √ The parameters of the contract were checked. (78ms)

  ======= Phase 2. The initial contract is tested. =====

        A predefined set of test cases will be run on the initial contract.
    √ 

  4. Complete the test bed of the contract, with liquidity pools.

        The (XDAO, FTM) pool contract is located at: {0x0ACa...}
        The (XDAO, FTM) pool contract's off-chain handle was built and checked.
    √ The (XDAO, FTM) pool contract's off-chain handle was built.
        The (XDAO, FTM) pool, now, has neither reserves nor LP tokens.
        The pool should accept any ratio of tokens as the 1s liquidity.
        (199,999,999,999,999.97 XO, 1,999.994 FTM) added to the (XDAO, FTM) pool.
        It's 20% of the theOwner's initial balance.
    √ The (XDAO, FTM) pool was added with liquidity. (102ms)
        The (XDAO, HTZ) pool contract is located at: {0x5CCF...}
        The (XDAO, HTZ) pool contract's off-chain handle was built and checked.
    √ The (XDAO, HTZ) pool contract's off-chain handle was built.
        The (XDAO, HTZ) pool, now, has neither reserves nor LP tokens.
        The pool should accept any ratio of tokens as the 1s liquidity.
        (160,000,000,000,000 XO, 199,999,999,999,999.97 HTZ) added to the (XDAO, HTZ) pool.
        It's 20% of the theOwner's initial balance.
    √ The (XDAO, HTZ) pool was added with liquidity. (118ms)

  5. Check administrative functions for parameter control.

        SetFees function works, changing fee rates correctly, called by the owner.
        SetFees function does NOT work, when called by a non-owner user.

        SetStoreAddresses function works when called by the owner.
        SetStoreAddresses function does NOT work when called by a non-owner user.

        SetPulses function works correctly, when called by the owner.
        SetPulse function does NOT work, when called by a non-owner user.

        SetMaxTransferAmount function works correctly, when called by the owner.
        SetMaxTransferAmount function does NOT work, when called by a non-owner user.

        SetQuantums function works correctly, when called by the owner.
        SetQuantums function does NOT work, when called by a non-owner user.
    √ The administrative functions for parameter control were checked. (372ms)

        BurnFee: 31.4% of transfer amount is correctly set to be burnt.
        RewardsFee: 31.4% of transfer amount is correctly set to be converted to Rewards Hertz.
        LiquidityFee: 2.3% of transfer amount is correctly set to be liquefied in pair with FTM.

        BurnStore Address: {0x8887...} is correctly set.
        RewardsStore Address: {0x0300...} is correctly set.
        LiquidityStore Address: {0x1093...} is correctly set.

        VoteBurnPulse: 0.07% of tokens used to vote are correctly set to be burnt.
        AllBurnPulse: 0.777% of all holdings is correctly set to be burnt.
        LiquidityPulse: 0.69% of LP is correctly set to be converted to Rewards Hertz.

        maxTransferAmount 1,000,000,000,000 XO is correctly set.
        burnQuantum 100,000 XO is correctly set.
        rewardsQuantum 200,000 XO is correctly set.
        liquidityQuantum 300,000 XO is correctly set.

        Dex Router address {0xCf7E...} is correctly set.
        Liquidity Pool (XDAO, FTM) is found at its due address: {0x0ACa...}.
        Liquidity Pool (XDAO, HTZ) is found at its due address: {0x5CCF...}.

        autoManagement is currently set to:  true
    √ The parameters were correctly reverted back to their initial values. (69ms)

  6. Check owner-to-user transfers and fees collection.

        Assumption: the state variable 'totalSupply' is always the real total supply.
    √ Test design was described.
        The maximum amount that will NOT trigger the MaxTransferAmount 
        and quantized fee management, is 100,000 XO
        Only fee collections should be triggered, if the owner transfers this amount to a user.
        Alice is not the current owner.
        theOwner transferred 100,000 XO to Alice.
        The total supply is preserved to be: 1,000,000,000,000,000 XO
        The sender's balance was reduced by the transfer amount: 100,000 XO.
        Owner-Any transfer is free of fees,
        hence the fee rates: { burn: 0, rewards: 0, liquidity: 0 }
        Burn fee is paid correctly. Burn fee collection was increased by: 0 XO.
        Rewards fee is paid correctly. Rewards fee collection was increased by: 0 XO.
        Liquidity fee is paid correctly. Liquidity fee collection was increased by: 0 XO.
        The amount sent - the amount received = total fees: 0
        Cash flow on owner-to-user transfer is correct and precise.
    √ An owner-to-user transfer is called. (84ms)

  7. Check user-to-user transfers and fees collection.

        Assumption: the state variable 'totalSupply' is always the real total supply.
    √ Test design was described.
        The maximum amount that will NOT trigger the MaxTransferAmount 
        and quantized fee management is 100,000 XO
        Only fee collection should be triggered, if a user transfers this amount to another user.
        Testing with the siginer Alice, who is not the current owner.
        Bob is not the current owner, either.
        Alice, a non-owner, transferred 100,000 XO to Bob.
        The total supply is preserved to be: 1,000,000,000,000,000 XO
        The sender's balance was reduced by the transfer amount: 100,000 XO.
        Burn fee is paid correctly. Burn fee collection was increased by: 31,400 XO.
        Rewards fee is paid correctly. Rewards fee collection was increased by: 1,000 XO.
        Liquidity fee is paid correctly. Liquidity fee collection was increased by: 2,300 XO.
        The amount sent - the amount received = total fees: 34,700
        Cash flow on owner-to-user transfer is correct and precise.
    √ An user-to-user transfer was called and the fees were correctly collected. (109ms)

  8. Check quantized management of fees.

        Tokens collected in the 'storeAddresses.rewards' should be spent
        on a quantum basis (to buy Rewards Hertz),
        to avoid frequent small transfers and to save gas fees.
        You can't spend 23000M wei to buy 5 wei of Hertz.
    √ Test design was described.
        The minimum amount that WILL trigger all the quantized management sub-functions is 
        1,000,000,000,001 XO.
        All quantized management sub-functions should be triggered,
        if a user transfers this amount to another user.
        Alice's balance was supplemented to be 1,000,000,000,001 XO, 
        to trigger the quantized fees management.
        MaxTransferAmount is set to Alice's balance: 1,000,000,000,001 XO, for this test.
        0.05 FTM was transferred to the XDAO contract to fund the future management work.
        Alice is not the current owner of the contract.
        Bob is not the current owner of the contract.
        Alice and Bob are not of the same address.

        Alice is transfering Bob all her balance 1,000,000,000,001 XO.

        On-chain messages...
        Total XO wei that were provided for liquefying:       23000002300023000000000000000
        1. XO wei that were forwarded to the pool directly:   11488820574010787334747781490
        2. XO wei that were sold for FTM at the dex:          11511181726012212665252218510
        3. FTM wei that were bought with the XOs at the dex:  114817125416879544
        4. FTM wei that were forwarded to the pool:           114817125416879544
        5. XO wei that the pool didn't accept:                5755922131267950941416353
        6. FTM wei that the pool didn't accept:               0
        7. PPM that failed to be accepted by the pool:        250

        We have an innovative implementation of token liquefying.
        Problem: When we add a sum of Utility tokens to liquidity pool
        (Utility token, Buddy token), we first assemble a new chunk of liquidity 
        (Utility amount, Buddy amount) using the sum, before forwarding the liquidity chunk
        to the liquidity pool. A typical solution is to let the new chunk equal to
        (1st half of the sum, BuddyTokensSwappedWith(2nd half of the sum))
        The flaw is they ignore that the ratio of reserves in the pool changes by the swap.
        This leads to the Buddy side of the chunk not fully accepted to the pool.
        The remainder is significant if the chunk is significant compared to the total liquidity.
        Solution: Instead of a half-half split, We calculate the best split.
        Achievement: The remainder is reduced to a few hundredths.
        A smaller remainder is impossible due to numerical errors in integer calculation.
        The cost of calculation is justified by our quantized liquefying.

        This transfer was hooked to burning XDAO tokens.
        31,400 XO were in the burn store waiting to be burnt.
        They ought to have come from previous transfers, pulses or whatever.
        314,000,000,000.314 XO newly came from the transfer as a burn fee, adding to the store.
        The consistency of burn fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        314,000,031,400.314 XO, the whole burn store, were subject to the burning.
        0 XO of them were found left in the burn store after the burning.
        314,000,031,400.314 XO, therefore, were actually burnt by the burning.
        -314,000,031,400.314 XO, the change in XDAO Total Supply, equals that amount.

        This transfer was hooked to selling XDAO tokens for Rewards Hertz.
        1,000 XO were in the rewards store waiting to be sold.
        They ought to have come from previous transfers, pulses or whatever.
        10,000,000,000.01 XO newly came from the transfer as a rewards fee, adding to the store.
        The consistency of rewards fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        10,000,001,000.01 XO, the whole rewards store, were subject to the sale.
        0 XO of them were found left in the burn store after the sale.
        10,000,001,000.01 XO, therefore, were actually sold by the sale.
        12,467,973,946.559 HTZ, the change in Rewards reserve, were bought with that amount.
        Verifying this amount's relation belongs to checking the Dex, which we trust.

        This transfer was hooked to liquefying XDAO tokens into (XDAO, FTM) pool.
        2,300 XO were in the liquidity store waiting to be liquified.
        They ought to have come from previous transfers, pulses or whatever.
        23,000,000,000.023 XO newly came from the transfer as a liquidity fee, adding to the store.
        The consistency of liquidity fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        23,000,002,300.023 XO, the whole liquidity store, were subject to the liquifying.
        0 XO of them were found left in the liquidity store after the liquifying.
        23,000,002,300.023 XO, therefore, were actually liquified by the liquifying.
        36,310.498 LP tokens, the change in (XDAO, FTM) pool, were minted with that amount.
        Verifying this amount's relation belongs to checking the Dex, which we trust.

        531966379024335 FTM wei, or 0.001 FTM, were transferred
        from {0x0165...}, the XDAO contract, to {0x7099...}, Alice the transaction sender.
        This is the compensation for Alice hooked to perform a round of fee management task.

        MaxTransferAmount is restored to: 1,000,000,000,000 XO.
    √ A transfer was hooked to do a round of management work, and got compensated. (426ms)

  9. Check auto-periodic pulses management. Under construction.

        A portion of tokens used to vote is automatically burnt,
        and a portion of liquidity is periodically converted to Rewards Hertz.
        The gas payer hooked to do the pulse tasks, are compensated for the extra gas.
    √ Test design was described.

  10. Upgrade the current contract to a new contract at the same address.

        The new upgradeable XDAO token was deployed to:  {0x0165...}
        Everything that was interacting with the existing contract, is not affected.
    √ deployed the new upgradeable contract, replacing/upgrading the existing contract. (145ms)

  ======= Phase 3. The upgrading contract that inherited the initial contract is tested. =====

        Exactly the same test cases will be repeated on the new contract.
    √ 

  5. Check administrative functions for parameter control.

        SetFees function works, changing fee rates correctly, called by the owner.
        SetFees function does NOT work, when called by a non-owner user.

        SetStoreAddresses function works when called by the owner.
        SetStoreAddresses function does NOT work when called by a non-owner user.

        SetPulses function works correctly, when called by the owner.
        SetPulse function does NOT work, when called by a non-owner user.

        SetMaxTransferAmount function works correctly, when called by the owner.
        SetMaxTransferAmount function does NOT work, when called by a non-owner user.

        SetQuantums function works correctly, when called by the owner.
        SetQuantums function does NOT work, when called by a non-owner user.
    √ The administrative functions for parameter control were checked. (317ms)

        BurnFee: 31.4% of transfer amount is correctly set to be burnt.
        RewardsFee: 31.4% of transfer amount is correctly set to be converted to Rewards Hertz.
        LiquidityFee: 2.3% of transfer amount is correctly set to be liquefied in pair with FTM.

        BurnStore Address: {0x8887...} is correctly set.
        RewardsStore Address: {0x0300...} is correctly set.
        LiquidityStore Address: {0x1093...} is correctly set.

        VoteBurnPulse: 0.07% of tokens used to vote are correctly set to be burnt.
        AllBurnPulse: 0.777% of all holdings is correctly set to be burnt.
        LiquidityPulse: 0.69% of LP is correctly set to be converted to Rewards Hertz.

        maxTransferAmount 1,000,000,000,000 XO is correctly set.
        burnQuantum 100,000 XO is correctly set.
        rewardsQuantum 200,000 XO is correctly set.
        liquidityQuantum 300,000 XO is correctly set.

        Dex Router address {0xCf7E...} is correctly set.
        Liquidity Pool (XDAO, FTM) is found at its due address: {0x0ACa...}.
        Liquidity Pool (XDAO, HTZ) is found at its due address: {0x5CCF...}.

        autoManagement is currently set to:  true
    √ The parameters were correctly reverted back to their initial values. (53ms)

  6. Check owner-to-user transfers and fees collection.

        Assumption: the state variable 'totalSupply' is always the real total supply.
    √ Test design was described.
        The maximum amount that will NOT trigger the MaxTransferAmount 
        and quantized fee management, is 100,000 XO
        Only fee collections should be triggered, if the owner transfers this amount to a user.
        Alice is not the current owner.
        theOwner transferred 100,000 XO to Alice.
        The total supply is preserved to be: 999,685,999,968,599.6 XO
        The sender's balance was reduced by the transfer amount: 100,000 XO.
        Owner-Any transfer is free of fees,
        hence the fee rates: { burn: 0, rewards: 0, liquidity: 0 }
        Burn fee is paid correctly. Burn fee collection was increased by: 0 XO.
        Rewards fee is paid correctly. Rewards fee collection was increased by: 0 XO.
        Liquidity fee is paid correctly. Liquidity fee collection was increased by: 0 XO.
        The amount sent - the amount received = total fees: 0
        Cash flow on owner-to-user transfer is correct and precise.
    √ An owner-to-user transfer is called. (72ms)

  7. Check user-to-user transfers and fees collection.

        Assumption: the state variable 'totalSupply' is always the real total supply.
    √ Test design was described.
        The maximum amount that will NOT trigger the MaxTransferAmount 
        and quantized fee management is 100,000 XO
        Only fee collection should be triggered, if a user transfers this amount to another user.
        Testing with the siginer Alice, who is not the current owner.
        Bob is not the current owner, either.
        Alice, a non-owner, transferred 100,000 XO to Bob.
        The total supply is preserved to be: 999,685,999,968,599.6 XO
        The sender's balance was reduced by the transfer amount: 100,000 XO.
        Burn fee is paid correctly. Burn fee collection was increased by: 31,400 XO.
        Rewards fee is paid correctly. Rewards fee collection was increased by: 1,000 XO.
        Liquidity fee is paid correctly. Liquidity fee collection was increased by: 2,300 XO.
        The amount sent - the amount received = total fees: 34,700
        Cash flow on owner-to-user transfer is correct and precise.
    √ An user-to-user transfer was called and the fees were correctly collected. (88ms)

  8. Check quantized management of fees.

        Tokens collected in the 'storeAddresses.rewards' should be spent
        on a quantum basis (to buy Rewards Hertz),
        to avoid frequent small transfers and to save gas fees.
        You can't spend 23000M wei to buy 5 wei of Hertz.
    √ Test design was described.
        The minimum amount that WILL trigger all the quantized management sub-functions is 
        1,000,000,000,001 XO.
        All quantized management sub-functions should be triggered,
        if a user transfers this amount to another user.
        Alice's balance was supplemented to be 1,000,000,000,001 XO, 
        to trigger the quantized fees management.
        MaxTransferAmount is set to Alice's balance: 1,000,000,000,001 XO, for this test.
        0.05 FTM was transferred to the XDAO contract to fund the future management work.
        Alice is not the current owner of the contract.
        Bob is not the current owner of the contract.
        Alice and Bob are not of the same address.

        Alice is transfering Bob all her balance 1,000,000,000,001 XO.

        On-chain messages...
        Total XO wei that were provided for liquefying:       23000002300023000000000000000
        1. XO wei that were forwarded to the pool directly:   11488820535969152654390883429
        2. XO wei that were sold for FTM at the dex:          11511181764053847345609116571
        3. FTM wei that were bought with the XOs at the dex:  114803927405087000
        4. FTM wei that were forwarded to the pool:           114803927405087000
        5. XO wei that the pool didn't accept:                5755922112209023096379838
        6. FTM wei that the pool didn't accept:               0
        7. PPM that failed to be accepted by the pool:        250

        We have an innovative implementation of token liquefying.
        Problem: When we add a sum of Utility tokens to liquidity pool
        (Utility token, Buddy token), we first assemble a new chunk of liquidity 
        (Utility amount, Buddy amount) using the sum, before forwarding the liquidity chunk
        to the liquidity pool. A typical solution is to let the new chunk equal to
        (1st half of the sum, BuddyTokensSwappedWith(2nd half of the sum))
        The flaw is they ignore that the ratio of reserves in the pool changes by the swap.
        This leads to the Buddy side of the chunk not fully accepted to the pool.
        The remainder is significant if the chunk is significant compared to the total liquidity.
        Solution: Instead of a half-half split, We calculate the best split.
        Achievement: The remainder is reduced to a few hundredths.
        A smaller remainder is impossible due to numerical errors in integer calculation.
        The cost of calculation is justified by our quantized liquefying.

        This transfer was hooked to burning XDAO tokens.
        31,400 XO were in the burn store waiting to be burnt.
        They ought to have come from previous transfers, pulses or whatever.
        314,000,000,000.314 XO newly came from the transfer as a burn fee, adding to the store.
        The consistency of burn fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        314,000,031,400.314 XO, the whole burn store, were subject to the burning.
        0 XO of them were found left in the burn store after the burning.
        314,000,031,400.314 XO, therefore, were actually burnt by the burning.
        -314,000,031,400.314 XO, the change in XDAO Total Supply, equals that amount.

        This transfer was hooked to selling XDAO tokens for Rewards Hertz.
        1,000 XO were in the rewards store waiting to be sold.
        They ought to have come from previous transfers, pulses or whatever.
        10,000,000,000.01 XO newly came from the transfer as a rewards fee, adding to the store.
        The consistency of rewards fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        10,000,001,000.01 XO, the whole rewards store, were subject to the sale.
        0 XO of them were found left in the burn store after the sale.
        10,000,001,000.01 XO, therefore, were actually sold by the sale.
        12,466,417,592.082 HTZ, the change in Rewards reserve, were bought with that amount.
        Verifying this amount's relation belongs to checking the Dex, which we trust.

        This transfer was hooked to liquefying XDAO tokens into (XDAO, FTM) pool.
        2,300 XO were in the liquidity store waiting to be liquified.
        They ought to have come from previous transfers, pulses or whatever.
        23,000,000,000.023 XO newly came from the transfer as a liquidity fee, adding to the store.
        The consistency of liquidity fee was/is checked somewhere else.
        This huge amount of fee was incurred by the huge transfer amount.
        23,000,002,300.023 XO, the whole liquidity store, were subject to the liquifying.
        0 XO of them were found left in the liquidity store after the liquifying.
        23,000,002,300.023 XO, therefore, were actually liquified by the liquifying.
        36,308.409 LP tokens, the change in (XDAO, FTM) pool, were minted with that amount.
        Verifying this amount's relation belongs to checking the Dex, which we trust.

        348076395873486 FTM wei, or 0 FTM, were transferred
        from {0x0165...}, the XDAO contract, to {0x7099...}, Alice the transaction sender.
        This is the compensation for Alice hooked to perform a round of fee management task.

        MaxTransferAmount is restored to: 1,000,000,000,000 XO.
    √ A transfer was hooked to do a round of management work, and got compensated. (353ms)

  9. Check auto-periodic pulses management. Under construction.

        A portion of tokens used to vote is automatically burnt,
        and a portion of liquidity is periodically converted to Rewards Hertz.
        The gas payer hooked to do the pulse tasks, are compensated for the extra gas.
    √ Test design was described.


   Contact me with feedback:

    √
        fleetpro@gmail.com
    √
        https://github.com/MachineLearningMike/XDAO